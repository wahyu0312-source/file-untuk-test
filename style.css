/* =========================================================
 * style.css — TSH ERP Revamp
 * - Elegant & Professional Theme
 * - Responsive Layout (Desktop, Tablet, Mobile)
 * - Enhanced Badge Colors for Readability
 * - Aligned Action Buttons & Row Details
 * ========================================================= */

/* ===== THEME & VARIABLES ===== */
:root {
  --bg: #f8fafc;
  --card: #ffffff;
  --border: #e2e8f0;
  --ink: #0f172a;
  --muted: #64748b;
  --primary: #2563eb;
  --primary-hover: #1d4ed8;
  --danger: #dc2626;
  --danger-hover: #b91c1c;
  --radius: 14px;
  --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --fs-base: clamp(13px, 0.9vw, 16px);
  --fs-s: clamp(11px, 0.75vw, 13px);
  --container: min(96vw, 1800px);
  --nav-height: 56px;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #020617;
    --card: #0f172a;
    --border: #1e293b;
    --ink: #e2e8f0;
    --muted: #94a3b8;
    --primary: #3b82f6;
    --primary-hover: #2563eb;
  }
}

/* ===== BASE & HELPERS ===== */
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; background: var(--bg); color: var(--ink); font: var(--fs-base)/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
main { padding-top: calc(var(--nav-height) + 1rem); }
.hidden { display: none !important; }
.muted { color: var(--muted); }
.s { font-size: var(--fs-s); }
.row, .row-between, .row-end { display: flex; align-items: center; }
.row-between { justify-content: space-between; }
.row-end { justify-content: flex-end; }
.row.gap, .row-end.gap { gap: .5rem; }
.grow { flex: 1; }
hr { border: none; border-top: 1px solid var(--border); margin: .35rem 0; }

/* ===== LAYOUT & BRANDING ===== */
.nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; display: flex; justify-content: space-between; align-items: center; height: var(--nav-height); padding: 0 1rem; border-bottom: 1px solid var(--border); background: var(--card); box-shadow: var(--shadow); }
.logo { height: 32px; }
.brand { margin-left: .75rem; font-weight: 600; font-size: clamp(16px, 1.1vw, 20px); }
.nav-right { display: flex; gap: .3rem; align-items: center; flex-wrap: wrap; }
.footer { position: fixed; bottom: 8px; right: 12px; font-size: 11px; color: var(--muted); background: var(--bg); padding: 2px 6px; border-radius: 4px; z-index: 100; }
.container { padding: 1rem; width: var(--container); margin: 0 auto; }
.card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: 1.25rem; margin-bottom: 1.25rem; box-shadow: var(--shadow); }
.card-tight { max-width: 480px; margin: 3rem auto; }
.card > header { margin: -1.25rem -1.25rem 1.25rem -1.25rem; padding: .75rem 1.25rem; border-bottom: 1px solid var(--border); }
.grid-1, .grid-2, .grid-3 { display: grid; gap: .8rem; }
.grid-2 { grid-template-columns: repeat(2, 1fr); }
.grid-3 { grid-template-columns: repeat(3, 1fr); }
.grid-chips { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: .5rem; }
.tile { border: 1px solid var(--border); border-radius: 12px; padding: .75rem; }

/* ===== FORMS & BUTTONS ===== */
input, select, textarea { width: 100%; padding: .6rem .8rem; border-radius: 10px; border: 1px solid var(--border); background: var(--card); color: var(--ink); transition: border-color .2s; }
input:focus, select:focus { border-color: var(--primary); outline: none; }
.input { width: 220px; max-width: 48vw; }
.btn { padding: .5rem 1rem; border-radius: 10px; border: 1px solid transparent; background: var(--primary); color: #fff; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: .4rem; font-size: 13px; font-weight: 500; transition: background-color .2s; white-space: nowrap; }
.btn:hover { background: var(--primary-hover); }
.btn.ghost { background: transparent; border-color: var(--border); color: var(--ink); }
.btn.ghost:hover { background: rgba(148, 163, 184, .12); border-color: var(--muted); }
.btn.full { width: 100%; }
.btn.s { padding: .3rem .6rem; font-size: 11px; border-radius: 8px; }
button:disabled { opacity: .5; cursor: not-allowed; }
.btn:has(> .fa-trash-can) { background: transparent; border-color: var(--danger); color: var(--danger); }
.btn:has(> .fa-trash-can):hover { background: var(--danger); color: #fff; }

/* ===== TABLE & BADGES ===== */
.table-wrap { overflow: auto; max-height: 60vh; border: 1px solid var(--border); border-radius: 12px; background: var(--card); }
.table { width: 100%; border-collapse: collapse; }
.table th, .table td { padding: .7rem; border-bottom: 1px solid var(--border); vertical-align: middle; text-align: left; }
.table th { font-size: 12px; color: var(--muted); text-transform: uppercase; }
/* >> Permintaan: Badge Elegan & Jelas */
.badge { display: inline-flex; align-items: center; gap: .4rem; padding: .2rem .6rem; border-radius: 99px; font-size: 12px; font-weight: 500; line-height: 1.2; border: 1px solid; }
.badge .dot { width: 7px; height: 7px; border-radius: 50%; background: currentColor; }
/* 状況 (Status) */
.st-begin    { color: #0ea5e9; border-color: #7dd3fc30; background: #cff4ff30; }
.st-inspect  { color: #8b5cf6; border-color: #c4b5fd30; background: #ddd6fe30; }
.st-hold     { color: #f97316; border-color: #fdba7430; background: #ffedd530; }
.st-ready    { color: #16a34a; border-color: #86efac30; background: #dcfce730; }
.st-shipped  { color: #475569; border-color: #cbd5e130; background: #f1f5f930; }
.st-ng       { color: #ef4444; border-color: #fca5a530; background: #fee2e230; }
/* 工程 (Process) */
.prc-laser   { color: #0ea5e9; } .prc-bend    { color: #14b8a6; }
.prc-frame   { color: #22c55e; } .prc-shassy  { color: #f59e0b; }
.prc-shweld  { color: #ef4444; } .prc-caulk   { color: #a855f7; }
.prc-tosou   { color: #d97706; } .prc-asm-in  { color: #06b6d4; }
.prc-asm-ok  { color: #3b82f6; } .prc-out     { color: #64748b; }
.prc-inspect { color: #8b5cf6; }

/* >> Permintaan: Baris Sejajar */
.row-main { display: flex; flex-direction: column; gap: .2rem; }
.row-main > .link { font-weight: 600; color: var(--primary); text-decoration: none; }
.row-main > .link:hover { text-decoration: underline; }
.row-sub { display: flex; gap: .75rem; flex-wrap: wrap; }
.row-sub .kv { display: inline-flex; gap: .25rem; align-items: center; font-size: 12px; color: var(--muted); }
.row-sub .kv b { color: var(--ink); font-weight: 500; }
/* >> Permintaan: Kolom Operasi 2-baris */
.actions-2col { display: grid; grid-template-columns: repeat(2, 1fr); gap: .3rem; }
.table td.col-status, .table td.col-proc { white-space: nowrap; }

/* ===== DROPDOWN & DIALOGS ===== */
.dropdown-inline { position: relative; }
.dropdown-inline > summary { list-style: none; cursor: pointer; }
.dropdown-inline > summary::-webkit-details-marker { display: none; }
.dropdown-inline[open] .caret { transform: rotate(180deg); }
.dropdown-inline .menu { position: absolute; top: calc(100% + 8px); right: 0; background: var(--card); border: 1px solid var(--border); border-radius: 12px; box-shadow: var(--shadow); min-width: 200px; padding: .35rem; z-index: 200; }
.menu .menu-item { display: flex; gap: .6rem; align-items: center; width: 100%; padding: .5rem .6rem; border-radius: 8px; border: none; background: transparent; color: var(--ink); cursor: pointer; text-align: left; }
.menu .menu-item:hover { background: rgba(148, 163, 184, .12); }
dialog.paper { width: min(900px, 96vw); border: 0; padding: 0; background: var(--card); color: var(--ink); border-radius: var(--radius); box-shadow: var(--shadow); }
dialog::backdrop { background: rgba(0,0,0,0.4); }
dialog .body { padding: 1rem 1.5rem; }
dialog footer { padding: .75rem 1.5rem; border-top: 1px solid var(--border); }
dialog .paper table { width: 100%; border-collapse: collapse; }
dialog .paper th, dialog .paper td { border: 1px solid var(--border); padding: 4px 6px; font-size: 12px; }
video#scanVideo { width: 100%; max-height: 48vh; border-radius: 12px; background: #000; }

/* ===== LOADER ===== */
.loader-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255, 255, 255, 0.7); z-index: 9999; display: flex; align-items: center; justify-content: center; }
@media (prefers-color-scheme: dark) { .loader-overlay { background: rgba(0, 0, 0, 0.7); } }
.spinner { width: 48px; height: 48px; border: 5px solid var(--border); border-bottom-color: var(--primary); border-radius: 50%; display: inline-block; animation: rotation 1s linear infinite; }
@keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* ===== RESPONSIVE ===== */
@media (max-width: 1200px) {
  .nav .btn > span { display: none; }
  .nav .btn .fa-solid, .nav .btn .fa-regular { margin-right: 0; }
  .brand { display: none; }
}
@media (max-width: 768px) {
  .grid-2, .grid-3 { grid-template-columns: 1fr; }
  .nav-right > .btn { display: none; } /* Sembunyikan tombol nav utama di mobile */
  .dropdown-inline { display: block !important; } /* Tampilkan menu setting */
  .container { padding: .5rem; }
  .card { padding: 1rem; }
  .card > header { padding: .75rem 1rem; margin: -1rem -1rem 1rem -1rem; }
}

/* ===== PRINT STYLES ===== */
@media print {
  body { background: #fff; }
  .nav, .footer, .btn, input, select, .card > header .row.gap, dialog footer { display: none !important; }
  main, .card { margin: 0; padding: 0; border: none; box-shadow: none; }
  .table-wrap { max-height: none; overflow: visible; }
  dialog { display: block !important; position: static; width: 100%; }
}
