<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>製造ダッシュボード</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <!-- Icons & Libs -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
  <!-- NAV -->
  <nav class="nav">
    <div class="nav-left">
      <i class="fa-solid fa-industry"></i>
      <span class="brand">製造ダッシュボード</span>
    </div>
    <div class="nav-right">
      <button data-tab="orders" class="btn ghost"><i class="fa-solid fa-clipboard-list"></i> 受注</button>
      <button data-tab="plans" class="btn ghost"><i class="fa-solid fa-list-check"></i> 生産計画</button>
      <button data-tab="shipments" class="btn ghost"><i class="fa-solid fa-truck"></i> 出荷予定</button>
      <button data-tab="inventory" class="btn ghost"><i class="fa-solid fa-boxes-stacked"></i> 在庫</button>
      <button data-tab="finished" class="btn ghost"><i class="fa-regular fa-square-check"></i> 完成品一覧</button>

      <!-- Settings dropdown -->
      <details class="dropdown-inline" id="ddSetting">
        <summary class="btn ghost"><i class="fa-solid fa-gear"></i> 設定 <i class="fa-solid fa-caret-down caret"></i></summary>
        <div class="menu right">
          <button class="menu-item" onclick="UI.openSetting('qr')"><i class="fa-solid fa-qrcode"></i> 工程QR</button>
          <button class="menu-item" onclick="UI.openSetting('user')"><i class="fa-solid fa-user-plus"></i> ユーザー追加</button>
          <button class="menu-item" onclick="UI.openSetting('pw')"><i class="fa-solid fa-key"></i> パス変更</button>
        </div>
      </details>
      <span id="userInfo" class="muted s"></span>
    </div>
  </nav>

  <!-- PANELS -->
  <main class="container">
    <!-- Orders -->
    <section id="tab-orders" class="card tab-panel">
      <header class="row-between">
        <h3><i class="fa-solid fa-clipboard-list"></i> オーダー一覧</h3>
        <div class="row gap">
          <input id="qOrders" placeholder="検索..." class="input" />
          <input type="file" id="importOrders" accept=".csv,.xlsx" hidden />
          <button class="btn ghost" onclick="UI.importFile('orders')"><i class="fa-solid fa-file-arrow-up"></i> インポート受注</button>
        </div>
      </header>
      <div class="table-wrap">
        <table class="table s">
          <thead>
            <tr>
              <th>注番 / 得意先</th><th>品名</th><th>品番</th><th>図番</th>
              <th>状態</th><th>工程</th><th>更新</th><th>担当</th><th>操作</th>
            </tr>
          </thead>
          <tbody id="tbOrders"></tbody>
        </table>
      </div>
    </section>

    <!-- Plans -->
    <section id="tab-plans" class="card tab-panel hidden">
      <header class="row-between">
        <h3><i class="fa-solid fa-list-check"></i> 生産計画</h3>
        <div class="row gap">
          <input type="file" id="importPlans" accept=".csv,.xlsx" hidden />
          <button class="btn ghost" onclick="UI.importFile('plans')"><i class="fa-solid fa-file-arrow-up"></i> インポート生産計画</button>
        </div>
      </header>
      <div id="plansTable" class="table s"></div>
    </section>

    <!-- Shipments -->
    <section id="tab-shipments" class="card tab-panel hidden">
      <header class="row-between">
        <h3><i class="fa-solid fa-truck"></i> 出荷予定</h3>
        <div class="row gap">
          <input type="file" id="importShipments" accept=".csv,.xlsx" hidden />
          <button class="btn ghost" onclick="UI.importFile('shipments')"><i class="fa-solid fa-file-arrow-up"></i> インポート出荷予定</button>
        </div>
      </header>
      <div id="shipmentsTable" class="table s"></div>
    </section>

    <!-- Inventory -->
    <section id="tab-inventory" class="card tab-panel hidden">
      <header class="row-between">
        <h3><i class="fa-solid fa-boxes-stacked"></i> 在庫</h3>
        <input id="qInventory" placeholder="検索..." class="input" />
      </header>
      <div class="table-wrap">
        <table class="table s">
          <thead>
            <tr><th>注番 / 得意先</th><th>品名</th><th>工程</th><th>状態</th><th>更新</th><th>操作</th></tr>
          </thead>
          <tbody id="tbInventory"></tbody>
        </table>
      </div>
    </section>

    <!-- Finished -->
    <section id="tab-finished" class="card tab-panel hidden">
      <header class="row-between">
        <h3><i class="fa-regular fa-square-check"></i> 完成品一覧</h3>
        <input id="qFinished" placeholder="検索..." class="input" />
      </header>
      <div class="table-wrap">
        <table class="table s">
          <thead>
            <tr><th>注番 / 得意先</th><th>品名</th><th>工程</th><th>状態</th><th>更新</th><th>操作</th></tr>
          </thead>
          <tbody id="tbFinished"></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Setting Modal -->
  <dialog id="dlgSetting" class="paper">
    <div class="body" id="settingBody"></div>
    <footer class="row-end">
      <button class="btn" onclick="document.getElementById('dlgSetting').close()">閉じる</button>
    </footer>
  </dialog>

  <!-- Ticket / History shared dialog -->
  <dialog id="dlgDoc" class="paper"><div class="body" id="docBody"></div>
    <footer class="row-end">
      <button class="btn ghost" onclick="window.print()"><i class="fa-solid fa-print"></i> 印刷</button>
      <button class="btn" onclick="document.getElementById('dlgDoc').close()">閉じる</button>
    </footer>
  </dialog>

  <!-- Footer -->
  <footer class="footer">
    <span>Design by Wahyu</span>
    <span class="health" id="healthStatus">オンライン</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
